<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Mini Social</title>

<!-- ÍCONE EMBUTIDO -->
<link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...COLEI_AQUI_O_BASE64_COMPLETO...">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:Arial;background:#111;color:#fff}
header{padding:10px;background:#222;text-align:center}
input,button,textarea{width:100%;margin:5px 0;padding:8px}
button{cursor:pointer}
#app{padding:10px}
.post{background:#222;padding:10px;margin:10px 0}
.small{font-size:12px;color:#aaa}
.like{cursor:pointer;color:#0af}
.comment{margin-left:10px;font-size:14px}
</style>
</head>

<body>
<header>
<h2>Mini Social</h2>
</header>

<div id="app">

<div id="auth">
<input id="user" placeholder="Usuário">
<input id="pass" type="password" placeholder="Senha">
<button onclick="criarConta()">Criar conta</button>
<button onclick="entrar()">Entrar</button>
</div>

<div id="social" style="display:none">
<p>Logado como: <b id="logado"></b></p>
<button onclick="sair()">Sair</button>

<h3>Novo post</h3>
<textarea id="postText" placeholder="O que você está pensando?"></textarea>
<button onclick="postar()">Postar</button>

<h3>Feed</h3>
<div id="feed"></div>
</div>

</div>

<script>
let usuarios=JSON.parse(localStorage.getItem("usuarios"))||[];
let posts=JSON.parse(localStorage.getItem("posts"))||[];
let atual=JSON.parse(localStorage.getItem("atual"))||null;

function criarConta(){
let u=user.value.trim(),p=pass.value;
if(!u||!p)return alert("Preencha tudo");
if(usuarios.find(x=>x.user===u))return alert("Usuário já existe");
usuarios.push({user:u,pass:p});
localStorage.setItem("usuarios",JSON.stringify(usuarios));
atual=u;
localStorage.setItem("atual",JSON.stringify(atual));
mostrar();
}

function entrar(){
let u=user.value,p=pass.value;
let ok=usuarios.find(x=>x.user===u&&x.pass===p);
if(!ok)return alert("Dados inválidos");
atual=u;
localStorage.setItem("atual",JSON.stringify(atual));
mostrar();
}

function sair(){
localStorage.removeItem("atual");
location.reload();
}

function postar(){
let t=postText.value.trim();
if(!t)return;
posts.unshift({user:atual,text:t,likes:0,comments:[]});
localStorage.setItem("posts",JSON.stringify(posts));
postText.value="";
render();
}

function like(i){
posts[i].likes++;
salvar();
}

function comentar(i){
let c=prompt("Comentário:");
if(!c)return;
posts[i].comments.push({user:atual,text:c});
salvar();
}

function salvar(){
localStorage.setItem("posts",JSON.stringify(posts));
render();
}

function render(){
feed.innerHTML="";
posts.forEach((p,i)=>{
let d=document.createElement("div");
d.className="post";
d.innerHTML=`
<b>${p.user}</b>
<p>${p.text}</p>
<span class="like" onclick="like(${i})">❤️ ${p.likes}</span>
<button onclick="comentar(${i})">Comentar</button>
<div>${p.comments.map(c=>`<div class="comment"><b>${c.user}:</b> ${c.text}</div>`).join("")}</div>
`;
feed.appendChild(d);
});
}

function mostrar(){
auth.style.display="none";
social.style.display="block";
logado.innerText=atual;
render();
}

if(atual)mostrar();
</script>
</body>
</html>