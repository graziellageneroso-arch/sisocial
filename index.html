<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>SiSocial</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- ÍCONE EMBUTIDO (não precisa de arquivo externo) -->
<link rel="icon" href="data:image/svg+xml;utf8,
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
<rect width='100' height='100' rx='22' fill='black'/>
<text x='50%' y='65%' text-anchor='middle' font-size='70' fill='#00ff88' font-family='Arial'>S</text>
</svg>">

<link rel="apple-touch-icon" href="data:image/svg+xml;utf8,
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
<rect width='100' height='100' rx='22' fill='black'/>
<text x='50%' y='65%' text-anchor='middle' font-size='70' fill='#00ff88' font-family='Arial'>S</text>
</svg>">

<meta name="theme-color" content="#000000">

<style>
body{font-family:Arial;margin:0;padding:10px;background:#eee}
.box{background:#fff;padding:10px;margin-bottom:10px}
.hidden{display:none}
button{margin-top:5px}
.post{border-bottom:1px solid #ccc;padding:5px 0}
</style>
</head>
<body>

<div id="login" class="box">
  <input id="name" placeholder="Nome">
  <button onclick="login()">Entrar</button>
</div>

<div id="app" class="hidden">
  <div class="box">
    <b id="me"></b>
    <button onclick="logout()">Sair</button>
  </div>

  <div class="box">
    <input id="postText" placeholder="Post">
    <button onclick="post()">Postar</button>
  </div>

  <div class="box">
    <input id="search" placeholder="Buscar usuário" oninput="searchUser()">
    <div id="results"></div>
  </div>

  <div class="box" id="feed"></div>
</div>

<script>
let users=JSON.parse(localStorage.getItem("users"))||[];
let me=null;

function save(){localStorage.setItem("users",JSON.stringify(users));}

function login(){
  const n=name.value.trim();
  if(!n)return;
  me=users.find(u=>u.name===n);
  if(!me){
    me={id:Date.now(),name:n,following:[],posts:[]};
    users.push(me); save();
  }
  localStorage.setItem("me",me.id);
  start();
}

function logout(){
  localStorage.removeItem("me");
  location.reload();
}

function start(){
  loginDiv.classList.add("hidden");
  app.classList.remove("hidden");
  document.getElementById("me").innerText=me.name;
  loadFeed();
}

function searchUser(){
  results.innerHTML="";
  users.filter(u=>u.name.includes(search.value)&&u.id!==me.id)
  .forEach(u=>{
    results.innerHTML+=`${u.name}
    <button onclick="follow(${u.id})">Seguir</button><br>`;
  });
}

function follow(id){
  if(!me.following.includes(id)){
    me.following.push(id); save(); loadFeed();
  }
}

function post(){
  if(!postText.value)return;
  me.posts.push(postText.value);
  postText.value=""; save(); loadFeed();
}

function loadFeed(){
  feed.innerHTML="";
  users.forEach(u=>{
    if(me.following.includes(u.id)){
      u.posts.forEach(p=>{
        feed.innerHTML+=`<div class="post"><b>${u.name}</b><br>${p}</div>`;
      });
    }
  });
}

const saved=localStorage.getItem("me");
if(saved){
  const u=users.find(x=>x.id==saved);
  if(u){me=u;start();}
}
</script>

</body>
</html>